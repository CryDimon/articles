***

В бесплатной версии мессенджера Kato Teams личные сообщения в комнатах 1:1 всегда принадлежат пользователям. В платной версии Kato Enterprise даже личные собщения могут принадлежать компании. Вот как это работает,

## Kato Teams
В Kato Teams учетная запись в сервисе полностью принадлежит создавшему ее пользователю, а история сообщения в [комнатах 1:1](https://kato.im/articles/ru/room-types/) принадлежат каждому из участников этих бесед.

Если подобное положение вещей является нежелательным, администраторы команд Kato могут отключить возможность создания комнат 1:1 между не-администраторами. Сделать это можно в меню настроек команды: [https://app.kato.im/#/membership/_/policy/1-1](https://app.kato.im/#/membership/_/policy/1-1).

Рассмотрим ситуацию использования Kato Teams на практическом примере:

Петя и Оля владеют консалтинговой компанией и используют для коммуникаций бесплатную версию Kato (Kato Teams). Крупный заказчик их компании — ООО «СуперТехнологии» — также пользуется Kato Teams. Когда этот клиент пригласит Петю и Олю в свою команду в сервисе Kato, консультанты смогут общаться еще и с сотрудниками этой компании. Для коммуникаций с клиентом и личного общения в режиме 1:1 им не придется переключать контекст, как видно из следующего рисунка. 

![clip.png](http://habrastorage.org/getpro/habr/post_images/cba/41f/389/cba41f389e63c326a90844ce867b6fae.png)

Таким образом, Петя и Оля смогут продолжить общение между собой в **режиме 1:1**, а также также обмениваться сообщениями в комнатах компании ООО «СуперТехнологии». История в комнате 1:1 будет принадлежать каждому из собеседников (как письмо электронной почты), а в комнатах с бóльшим числом участников — команде, которой принадлежат комнаты. Несмотря на возможность подключения к нескольким командам, личный чат в режиме 1:1 всегда один и существует независимо, полностью находясь под контролем собеседников.  

Когда срок действия договора с заказчиком истечет, Петя и Оля будут удалены из команды ООО «СуперТехнологии» и не смогут видеть, что происходит в комнатах с участием сотрудников этой команды, но сохранят контроль над комнатой 1:1. Если впоследствии Петя и Оля решат закрыть свою компанию и удалить команду из Kato, то они более не будут соединены внутри сервиса и пропадут из списка контактов друг друга в Kato.

В том случае, если позже Петя устроится на работу в компанию, которая использует Kato Teams, и эта организация пригласит еще и Олю, то история их сообщений в режиме 1:1 восстановится с того момента, на котором она прервалась в момент удаления команды консалтинговой фирмы — «непрерывность» истории личного общения является одним из отличий Kato от других мессенджеров.

## Kato Enterprise
Каждый экземпляр Kato Enterprise (платная версия в настоящий момент находится на этапе бета-тестирования) является замкнутой «вселенной», состоящей из команд сотрудников, комнат, участвующих в них пользователей, а также установок, определяющих правила функционирования данной «вселенной». 

Сущности (пользователи, их права доступа, отправленные сообщения, правила видимости и т.д.) могут взаимодействовать между собой лишь внутри этой «вселенной». Все диалоги в режиме 1:1 внутри этой «вселенной» принадлежат компании, которая платит за Kato Enterprise — точно так же как этой компании принадлежат все документы, созданные сотрудниками, включая отправленную ими электронную почту (это тоже своего рода документы).

## Edited messages
В Kato сообщения можно редактировать только если соблюдены два условия:

1.  Редактируемое сообщение является последним отправленным;
2.  С момента его публикации (записи в базу данных) прошло меньше 120 секунд.

Сохраняется только последнее изменение сообщения. В Kato не хранится история изменений сообщения (change log), в базе также нет никаких отметок, свидетельствующих о том, что сообщение было изменено. 

## Удаленные сообщения
В Kato сообщения не удаляются из базы данных — администраторы команд могут «удалять» сообщения из комнат (но не из комнат 1:1), однако в реальности это позволит только скрыть сообщение от не-администраторов. Сообщение будет по прежнему храниться в базе данных и может быть в любой момент _«восстановлено»_.

Физическое удаление сообщений отсутствует в сервисе по трем причинам:

1.  Удаление сообщения из базы данных не означает, что его не скопировали другим способом, например просто сделав снимок экрана.
2.  Если сообщение было удалено после резервного копирования базы данных, то его иногда все равно можно восстановить из копии базы данных.
3.  «Удаленное» сообщение могло быть сохранено в файле в результате исполнения функции «Download History».
